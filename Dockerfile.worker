# image for web
FROM honeynet/thug:latest

RUN cd /opt/thug/src && \
    python setup.py install

COPY ./worker/entrypoint.sh /
COPY ./worker /opt/project/worker/
COPY ./config.json /opt/project/config.json

RUN chmod +x /entrypoint.sh

ENV PYTHONPATH /opt/project/
WORKDIR /opt/project/worker/

RUN pip install -r requirements.txt

RUN adduser --disabled-password --gecos '' user